---
import { Image } from "astro:assets";
import { FaCartShopping, FaRegHeart } from "react-icons/fa6";
import AddToFavorites from "./AddToFavorites";

const { product } = Astro.props;
---

<div
  class="relative flex w-full justify-self-center max-w-xs flex-col overflow-hidden rounded-lg border border-gray-100 bg-white shadow-md"
>
  <div
    class="relative mx-3 mt-3 flex justify-center h-60 overflow-hidden rounded-xl"
  >
    <a href={`/product/${product.id}`}>
      <Image
        class="bg-gray-50"
        src={product.images[0]}
        alt="product image"
        width={240}
        height={240}
        format="avif"
        quality={"mid"}
        densities={[1.5, 2]}
        loading={"lazy"}
      />
    </a>
    <!-- <img class="object-cover" src={product.images[0]} alt="product image" /> -->
    <span
      class="absolute top-0 left-0 m-2 rounded-full bg-black px-2 text-center text-sm font-medium text-white"
    >
      {product.discountPercentage}% OFF
    </span>
    <span
      class="absolute top-0 right-0 m-2 px-2 text-center text-sm font-medium"
    >
      <!-- <FaRegHeart className="cursor-pointer text-lg"/> -->
      <AddToFavorites client:only/>
    </span>
  </div>
  <div class="mt-4 px-5 pb-5">
    <a href={`/product/${product.id}`}>
      <h5 class="text-lg tracking-tight truncate text-slate-900">
        {product.title}
      </h5>
    </a>
    <div class="mt-2 mb-5 flex items-center justify-between">
      <p>
        <span class="text-3xl font-bold text-slate-900 mr-1">
          ${
            Math.floor(
              (product.price -
                (product.price * product.discountPercentage) / 100) *
                100
            ) / 100
          }
        </span>
        <span class="text-sm text-slate-900 line-through">
          ${product.price}
        </span>
      </p>
    </div>
    <div
      class="flex items-center justify-center rounded-md bg-slate-900 px-5 py-2.5 text-center text-sm font-medium text-white hover:bg-gray-700"
    >
      <FaCartShopping className="text-xl mr-4" /> Dodaj do koszyka
    </div>
  </div>
</div>
